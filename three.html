<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>My first three.js app</title>
		<style>
			body {
				margin: 0;
			}
		</style>
	</head>
	<body>
		<script src="./three.js"></script>
		<script>
			const scene = new THREE.Scene()
			const camera = new THREE.PerspectiveCamera(
				75,
				window.innerWidth / window.innerHeight,
				0.1,
				1000
			)

			const renderer = new THREE.WebGLRenderer()
			renderer.setSize(window.innerWidth, window.innerHeight)
			document.body.appendChild(renderer.domElement)

			const center = new THREE.Vector3()
			scene.updateMatrixWorld(true)
			scene.traverse((object) => {
				if (object.geometry) {
					object.geometry.computeBoundingBox()
					object.geometry.boundingBox.getCenter(center)
				}
			})
			const cameraDistance = 2
			let theta = 0
			camera.position.y = center.y + cameraDistance
			camera.position.z = center.z + cameraDistance
			camera.lookAt(center)

			const geometry = new THREE.BoxGeometry(1, 1, 1)
			const material = new THREE.LineDashedMaterial({
				color: 0x00ff00,
				linewidth: 0.1,
				dashSize: 3,
				gapSize: 1,
			})
			const cube = new THREE.Mesh(geometry, material)
			scene.add(cube)
			const geometry2 = new THREE.BoxGeometry(0.5, 0.5, 2)
			const material2 = new THREE.LineDashedMaterial({
				color: 0x00f1f0,
				linewidth: 0.1,
				dashSize: 3,
				gapSize: 1,
			})
			const cube2 = new THREE.Mesh(geometry2, material2)
			cube2.position.x = 0
			scene.add(cube2)

			const cube2target = {
				positiveLimit: 1,
				negativeLimit: -1,
				direction: true,
			}
			function animate() {
				requestAnimationFrame(animate)
				cube2.rotation.z += 0.01
				cube2.position.x >= cube2target.positiveLimit
					? (cube2target.direction = false)
					: cube2.position.x <= cube2target.negativeLimit
					? (cube2target.direction = true)
					: (cube2.direction = false)

				cube2target.direction
					? (cube2.position.x += 0.01)
					: (cube2.position.x -= 0.01)
				camera.position.x = center.x + cameraDistance * Math.sin(theta)
				camera.position.z = center.z + cameraDistance * Math.cos(theta)
				camera.lookAt(center)
				renderer.render(scene, camera)
				theta += 0.003
				renderer.render(scene, camera)
			}
			animate()
		</script>
	</body>
</html>
